(this["webpackJsonpsubtitle-concatenator"]=this["webpackJsonpsubtitle-concatenator"]||[]).push([[0],{22:function(e,n,t){},24:function(e,n,t){},33:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t.n(c),o=t(13),a=t.n(o),i=(t(22),t(2)),u=t.n(i),s=t(1),l=t(4),f=t(3),p=t(17),h=(t(24),t(14)),d=function(e){return e[e.length-1]},v=function(e){return function(n){var t=n.split(":").reverse(),c=Object(h.a)(t),r=c[0],o=c.slice(1),a=String(function(e){return function(n){return(t=0,c=999,function(e){return[t,c,e].sort((function(e,n){return n-e}))[1]})(Math.round(n/e*1e3));var t,c}}(e)(Number(r))).padStart(3,"0");return[o.reverse().join(":"),a].join(".")}},j=function(e){return"- ".concat(e)},b=function(e){return e.reduce((function(e,n){var t=n.ts,c=n.sentence,r=[t.map(v(30)).join(" --\x3e "),j(c)].join("\n");return[].concat(Object(s.a)(e),[r])}),["WEBVTT"]).join("\n\n")},m=t(15),x=t.n(m),O=t(16),w=t.n(O),g=t(5),S=function(e){return new Promise((function(n){var t=new FileReader;t.onload=function(e){return n(e.target.result)},t.readAsArrayBuffer(e)}))},k=function(e,n,t){var c=new Blob([n],{type:t}),r=document.createElement("a");r.href=window.URL.createObjectURL(c);var o=e;r.download=o,r.click()},y=function(){var e=Object(p.a)(),n=e.register,t=e.watch,r=e.handleSubmit,o=Object(c.useMemo)((function(){var e;return null!==(e=t("file"))&&void 0!==e?e:[]}),[t]),a=Object(c.useState)(null),i=Object(f.a)(a,2),h=i[0],v=i[1];return console.log(h),Object(c.useEffect)((function(){o.length&&Object(l.a)(u.a.mark((function e(){var n,t,c,r,a,i,l,p,h,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o[0],e.next=3,S(n);case 3:return t=e.sent,c=new x.a.Workbook,e.next=7,c.xlsx.load(t);case 7:return v(c),r=[],c.eachSheet((function(e,n){var t=[];r[n]=t,e.eachRow((function(e,n){if(1!==n){var c=[];t.push(c),e.eachCell((function(e){c.push(String(e.value))}))}}))})),console.log(Object(s.a)(r.entries())),a=Object(s.a)(r.entries()).reduce((function(e,n){var t=Object(f.a)(n,2),c=t[0],r=t[1];return r?(e[c]=r.reduce((function(e,n){var t=Object(f.a)(n,3),c=t[0],r=t[1],o=t[2];return e.length&&!/[.?!]$/.test(d(d(e).chunks))||e.push({ts:[],chunks:[]}),d(e).ts.push(c),d(e).ts.push(r),d(e).chunks.push(o),e}),[]).map((function(e){var n,t=e.ts,c=e.chunks;return{ts:[t[0],d(t)],sentence:(n=c.join(" "),n===n.toUpperCase()?function(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}(n):n)}})),e):e}),[]),c.eachSheet((function(e,n){e.eachRow((function(e,t){1!==t&&e.eachCell((function(e,c){var r,o,i,u,s=null!==(r=null===(o=a[n])||void 0===o?void 0:o[t-2])&&void 0!==r?r:{};e.value=1===c?null===(i=s.ts)||void 0===i?void 0:i[0]:2===c?null===(u=s.ts)||void 0===u?void 0:u[1]:3===c?s.sentence:void 0}))}))})),e.next=15,c.xlsx.writeBuffer();case 15:return i=e.sent,l=[],p="".concat(n.name.split(".").slice(0,-1).join("."),"_concat"),l.push({filename:"".concat(p,".xlsx"),content:i,mimeType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),a.map(b).forEach((function(e,n){l.push({filename:"".concat(c.worksheets.find((function(e){return e.id===n})).name,".vtt"),content:(new TextEncoder).encode(e),mimeType:"text/plain"})})),h=new w.a,l.forEach((function(e){var n=e.filename,t=e.content;e.mimeType;h.file(n,t,{})})),e.next=24,h.generateAsync({type:"blob"});case 24:j=e.sent,k("".concat(p,"_").concat((new Date).toISOString(),".zip"),j,"application/zip");case 26:case"end":return e.stop()}}),e)})))()}),[o]),Object(g.jsxs)("form",{onChange:r((function(e){localStorage.setItem("form",JSON.stringify(e))})),children:[Object(g.jsx)("br",{}),Object(g.jsxs)("label",{children:["Upload file (XLSX)",Object(g.jsx)("input",{type:"file",name:"file",ref:n})]})]})};a.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(y,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.68602967.chunk.js.map